[[English](README.md) | [中文](README.zh-CN.md)]
## 一、项目简介

`config`：非常契合工具程序的参数配置程序。同时，也是平台开发技术整合的一部分，欢迎参与共同建设。

## 二、项目解决的问题

**程序的参数配置，同时支持默认值、本地命令行输入、本地配置文件输入、环境变量输入、grpc中心服务输入，并拥有优先级**

### 1. 多种参数配置方法同时存在的意义

- [2023-06-30更新]界面配置：降低用户使用门槛的同时，
- 本地命令行输入：手动在命令行界面输入参数名和参数值。多用于 cmd 和 shell。
- 本地配置文件：手动配置参数，只需要一次配置，下次运行时，无需配置参数。
- 环境变量：类似于`本地配置文件`方式，但如果在复杂的环境中，环境变量可能会导致多个程序之间的冲突。
- grpc 中心服务：工具程序将具备：对外统一的远程控制接口。亲和自动化。
- 默认值：作者认为，工具程序的配置是给懂软件配置的人配备的，为了扩大用户群体，工具程序应当支持无参数配置（即参数默认化），点击即用。


### 2. 多种参数配置方法的优先级

程序的参数配置可以同时存在多种，但最终的配置只有一份，**配置参数方法的优先级**是一种变相的默认行为。`本地命令行输入` > `本地配置文件` > `环境变量` > `grpc 中心服务`（优先级从大到小排序）。

优先级之所以这么排序，以 `本地命令行输入` > `本地配置文件` 为例，是考虑到命令参数需要的手动输入成本大于本地配置文件输入成本（原因很简单：本地配置文件可以只一次编写，下次执行就不用配置了；命令行传参形式，每次都得写参数，复用性差，所以花时间多）。

### 三、功能简介

1. 程序应当记录除了默认值方式配置的之外的最终的配置是由谁设置的，比如key1由grpc配置的，key2是由本地配置文件配置的，key3是由本地命令行配置的。

2. 配置程序的初始配置（默认、命令行、本地配置、环境变量、grpc X 开、关）默认通过环境变量配置，默认：（启用默认、启用命令、启用本地配置、启用环境变量、关闭grpc）。

3. 配置的key 和value为了简化，都只使用字符串类型

## 四、快速开始

1. 编辑 `dynamic.json`， 输入你的工具程序想要配置的参数，key 的命令规范需要使用下划线风格（暂不支持驼峰命令）。
2. 执行 `servers/main/main.go`，即可生成代码，输出到`output` 文件夹
1. 输出`*.pb.go`
```
protoc -I="." --go_out=./proto/output ./proto/config/*.proto
```

2. 输出`*_grpc.pb.go`
```
protoc -I="." --go-grpc_out=./proto/output ./proto/config/*proto
```